# 使用 pr
# #8675 plugin system use steel scheme
# #5768 file explorer  
# X #2869 icons
# #6417 inline-diagnostics lsp codelens style diagnostics 
# #6531 lang-config-open
# #5199 tutor
# #8021 event system
### #6118 sticky-context

# [merged] #5934 lsp inlay hints
# [merged] #6173 completion_sync 
# [merged] #6004 the-mikedavis:md-dynamic-picker-recalculate-column-widths

theme = "onedark_local"
# [#2869]
# icons= "nerd"
# icons= "nerdfonts"

[editor]


# 真彩支持
# 使用 infocmp | rg color 检查是否支持 256color [终端控制命令 infocmp](http://manual.51yip.com/shell/terminalccmds.html) 
# 使用 tmux 的时候,追加配置  
# set -g default-terminal "tmux-256color" 
# set -ga terminal-overrides ',xterm-256color:Tc' 
# 需要 export TERM=xterm-256color  
# tty export COLORTERM=truecolor
true-color = true
undercurl = true
auto-completion = true
# auto-save = false
auto-info = true
# cursorcolumn = true # 光标列高亮
cursorline = true  # 光标 行高亮
color-modes = true
idle-timeout = 40
# mouse = true
# scrolloff = 5 # 滚动时上下边缘填充行数
# scroll-lines = 3
line-number = "relative"  # 行号类型 absolute / relative 
# rulers = [81, 121]   # 标尺
# text-width = 80  # reflow 自动分割换行, 支持软换行

# bufferline = "multiple"  # always | multiple | nerver
# [editor.gutters]
# layout = ["diagnostics", "spacer", "line-numbers", "spacer", "diff"]

[editor.soft-wrap]
enable = true
# max-wrap = 20 
# max-indent-retain = 40
# wrap-indicator = "↪ "
# wrap-at-text-width = true # zen-mode center View.inner_area


# [#2869]
# [editor.icons]
# bufferline = true
# picker = true
# statusline = true

[editor.cursor-shape]
insert = "bar"
normal = "block"
select = "underline"

[editor.lsp]
# 服务器语言信息提示 
display-messages = true
# display-signature-help-docs = false
# LSP Type Hints default is false
display-inlay-hints = true
# [6417]
# inline-diagnostics= { min-diagnostic-width = 80 }
# display-diagnostic-message=false

# all / none
[editor.whitespace.render]
# space = "all"
tab = "all"
# newline = "all"

[editor.indent-guides]
render = true
character = "╎" # Some characters that work well: "▏", "╎", "┆", "┊"
skip-levels = 0

# 状态栏定义
[editor.statusline]
# [#2869] file-type-icon
left = [
  "mode",
  "spacer",
  "spinner",
  "spacer",
  "version-control",
  "spacer",
  "read-only-indicator",
  # "file-type-icon",
  "file-name",
  "file-modification-indicator",
  "register"
]
center = ["diagnostics", "workspace-diagnostics"]
right = [
  "selections",
  "primary-selection-length",
  "position",
  "position-percentage",
  "file-encoding",
  "file-line-ending",
  "file-type",
]
separator = "│"
# mode.normal = "NORMAL"
# mode.insert = "INSERT"
# mode.select = "SELECT"

# [#5768]
# s-e 切换显示
# s-E 切换并追溯到当前文件所在位置 
# [editor.explorer]
# position = "overlay"
# column-width = 30

# [#6118]
# [editor.sticky-context]
# enable = true
# # indicator = true
# max-lines = 10

[keys.normal]
# use `li` or remap `after insert`
a = ["move_char_right", "insert_mode"]
"C-r" = { s = ":write", e = "reveal_current_file",  r = ":reload",  c = ":config-reload" }
# "C-r" = { s = ":write", r = ":reload",  c = ":config-reload" }
"C-s" = ":write"
"C-j" = "save_selection"
# "C-z" = "normal_mode"                  # replace suspend
"A-/" = "toggle_comments"
"\\"  = ":reflow"                       # |
"X"   = "extend_line_above"
"Z" = { "Z" = [":quit"] }
"z" = { "o" = [":toggle soft-wrap.wrap-at-text-width"] }

# macos 自动切换到英文环境
# "esc" = [":sh macism com.apple.keylayout.ABC", "normal_mode"]
# linux
"esc" = [":pipe-to bash ~/.config/helix/shells/ibus-en", "normal_mode"]

# space mode
[keys.normal.space]
"x" = ":buffer-close"
"w" = { r = ":reload",  c = ":config-reload" }
"." = "file_picker_in_current_buffer_directory"
"n" = "signature_help"
# "o" = "diagnostics_popup"

[keys.insert]
# "esc" = [":sh macism com.apple.keylayout.ABC", "normal_mode"]
# linux
"esc" = [":pipe-to bash ~/.config/helix/shells/ibus-en", "normal_mode"]

# [keys.select]

# 测试促成
